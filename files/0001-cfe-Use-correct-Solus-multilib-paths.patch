From 8fd02c7eb4d60699f9ad107e53d4d145c3b8ecf1 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey@solus-project.com>
Date: Thu, 1 Jun 2017 00:46:38 +0100
Subject: [PATCH 1/3] cfe: Use correct Solus multilib paths

The correct native arch libdir on Solus is /usr/lib64, whereas the
multilib 32bit (i686) arch directory is /usr/lib32. The main linkers
can then be found inside these directories.

Signed-off-by: Ikey Doherty <ikey@solus-project.com>
---
 lib/Driver/ToolChains.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/lib/Driver/ToolChains.cpp b/lib/Driver/ToolChains.cpp
index 9bc9ae4..0648b14 100644
--- a/lib/Driver/ToolChains.cpp
+++ b/lib/Driver/ToolChains.cpp
@@ -4420,7 +4420,7 @@ std::string Linux::getDynamicLinker(const ArgList &Args) const {
     Loader = "ld64.so.1";
     break;
   case llvm::Triple::x86:
-    LibDir = "lib";
+    LibDir = "lib32";
     Loader = "ld-linux.so.2";
     break;
   case llvm::Triple::x86_64: {
@@ -4435,7 +4435,7 @@ std::string Linux::getDynamicLinker(const ArgList &Args) const {
   if (Distro == Distro::Exherbo && (Triple.getVendor() == llvm::Triple::UnknownVendor ||
                                     Triple.getVendor() == llvm::Triple::PC))
     return "/usr/" + Triple.str() + "/lib/" + Loader;
-  return "/" + LibDir + "/" + Loader;
+  return "/usr/" + LibDir + "/" + Loader;
 }
 
 void Linux::AddClangSystemIncludeArgs(const ArgList &DriverArgs,
-- 
2.13.0

